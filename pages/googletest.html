<!DOCTYPE html>
<html>
<head>
<title>
Google Charts Test
</title>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">

</head>
<body>
<div class="container">
	<div class="row">
	    <div class="span4">
	    	<div id="chart_div_1">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_2">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_3">Chart</div>
	    </div>
	</div>
	<div class="row">
	    <div class="span4">
	    	<div id="table_div_1">Table</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_2">Table</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_3">Table</div>
	    </div>
	</div>
</div>	


<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script>
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart','table']});
    // google.load('visualization', '1', {packages:['table']});

	// Set a callback to run when the Google Visualization API is loaded.
	google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.  
    function drawChart() {
		var jsonData1 = $.ajax({
          		url: "/chartdata?node=0",
		  		dataType:"json",
		  		async: false
		}).responseText;
		var jsonData2 = $.ajax({
          		url: "/chartdata?node=2",
		  		dataType:"json",
		  		async: false
		}).responseText;
		var jsonData3 = $.ajax({
          		url: "/chartdata?node=3",
		  		dataType:"json",
		  		async: false
		}).responseText;

      
        var data1 = new google.visualization.arrayToDataTable(JSON.parse(jsonData1), true);
        data1.setColumnLabel(0, "Time");
        data1.setColumnLabel(1, "KWh");
        var data2 = new google.visualization.arrayToDataTable(JSON.parse(jsonData2), true);
        data2.setColumnLabel(0, "Time");
        data2.setColumnLabel(1, "KWh");
		var data3 = new google.visualization.arrayToDataTable(JSON.parse(jsonData3), true);
        data3.setColumnLabel(0, "Time");
        data3.setColumnLabel(1, "KWh");
       
        // var formatter = new google.visualization.DateFormat({formatType:'short'});
		// formatter.format(data, 0);

		// Instantiate and draw our chart, passing in some options.
		var options = {height: 300, legend: {position: 'none'}};
		var chart1 = new google.visualization.ColumnChart(document.getElementById('chart_div_1'));
		chart1.draw(data1, options);
		var chart2 = new google.visualization.ColumnChart(document.getElementById('chart_div_2'));
		chart2.draw(data2, options);
		var chart3 = new google.visualization.ColumnChart(document.getElementById('chart_div_3'));
		chart3.draw(data3, options);

		// Instantiate and draw our tables	
		var table1 = new google.visualization.Table(document.getElementById('table_div_1'));
        table1.draw(data1, {showRowNumber: true});
        var table2 = new google.visualization.Table(document.getElementById('table_div_2'));
        table2.draw(data2, {showRowNumber: true});
        var table3 = new google.visualization.Table(document.getElementById('table_div_3'));
        table3.draw(data3, {showRowNumber: true});
    }
</script>
</body>
</html>

