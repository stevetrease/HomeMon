<!DOCTYPE html>
<html>
<head>
<title>
Power Charts
</title>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">

</head>
<body>
<div class="container">
	<div class="row">
	    <div class="span4">
	    	<div id="chart_div_0">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_2">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_3">Chart</div>
	    </div>
	</div>
	<div class="row">
	    <div class="span4">
	    	<div id="chart_div_4">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_5">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_6">Chart</div>
	    </div>
	</div>
	<div class="row">
	    <div class="span4">
	    	<div id="chart_div_7">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="chart_div_U">Chart</div>
	    </div>
	</div>
	<div class="row"></div>
	<div class="row">
	    <div class="span4">
	    	<div id="table_div_0">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_2">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_3">Chart</div>
	    </div>
	</div>
	<div class="row">
	    <div class="span4">
	    	<div id="table_div_4">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_5">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_6">Chart</div>
	    </div>
	</div>
	<div class="row">
	    <div class="span4">
	    	<div id="table_div_7">Chart</div>
	    </div>
	    <div class="span4">
	    	<div id="table_div_U">Chart</div>
	    </div>
	</div>		
</div>	


<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script>
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart','table']});

	// Set a callback to run when the Google Visualization API is loaded.
	google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.  
    function drawChart() {
    	var tags = new Array("0", "2", "3", "4", "5", "6", "7", "U");
		for (var i = 0; i < tags.length; i++) {	
			var tag = tags[i];
			var jsonData = $.ajax({
          			url: "/chartdata?node=" + tag + "&period=hourly",
		  				dataType:"json",
		  				async: false
		  	}).responseText;
	
            var data = new google.visualization.arrayToDataTable(JSON.parse(jsonData), true);
			data.setColumnLabel(0, "Date");
			data.setColumnLabel(1, "KWh");
			
			// Instantiate and draw our chart	 
			var options = {height: 300, legend: {position: 'none'}};
			var chart = new google.visualization.ColumnChart(document.getElementById('chart_div_' + tag));
			chart.draw(data, options);

			// Instantiate and draw our table
			var table = new google.visualization.Table(document.getElementById('table_div_' + tag));
			table.draw(data, {showRowNumber: false});
		}
	}
</script>
</body>
</html>