<!DOCTYPE html>
<html>
<head>
<title>
D3.js Test
</title>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<style type="text/css">
.chart div {
	font: 10px sans-serif;
	background-color: steelblue;
	text-align: right;
	padding: 3px;
	margin: 1px;
	color: white;
}
</style>
</head>
<body>

<div class="container">
	<div class="row">
	    <div class="span12">
			<div id="time" style="font-size:x-small">Time</div>
	    </div>
	</div>
</div>


<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://www.trease.eu:8500/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

<script>

	var chartdata = []; 

	var chart = d3.select("body").append("div")
		.attr("class", "chart");
	chart.selectAll("div")
	    .data(chartdata)
	    .enter().append("div")
		.style("width", function(d) { return d * 10 + "px"; })
		.text(function(d) { return d; });


	var socket = io.connect("http://www.trease.eu:8500/mqtt");
	socket.on('data', function(data) { 
	
		chartdata.push();
		console.log(chartdata);
		redraw();
	
		var dt = new Date(); 
		document.getElementById("time").innerHTML= dt.toLocaleTimeString();
	});
</script>
</body>
</html>

